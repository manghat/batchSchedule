(function(){!function(t){var e,a,n,o,r,i,l;return t.fn.immoral=function(e){var a;return a={content:"",modalClass:"immoral-modal",modalContainerClass:"immoral-modal-container",modalCloseButton:'<a href="#" rel="modal:close">Close</a>',modalContentClass:"immoral-modal-content",modalContainer:!1,modalStyle:{position:"absolute",left:"50%",top:"50%",width:"50%",height:"50%",transform:"translate(-50%, -50%)",background:"white","text-align":"left"},modalContainerStyle:{width:"100%",margin:"0px",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",height:"100%",display:"none","z-index":"10000001",background:"rgba(0,0,0,.8)","text-align":"center","overflow-y":"auto","-webkit-overflow-scrolling":"touch"},modalContentStyle:{width:"100%",height:"100%"}},this.each(function(){return this.settings=t.extend(!0,{},a,e),r(this),o(this)})},o=function(e){var n,o,r;return t(e).bind("click",function(t){return t.preventDefault(),l(e)}),t(e).keydown(function(t){return 27===t.keyCode?a(e):void 0}),t(e.settings.modalContainer).click(function(n){return n.preventDefault(),"modal:close"===t(n.target).attr("rel")?a(e):n.target===n.currentTarget?a(e):void 0}),n=window.addEventListener?"addEventListener":"attachEvent",o=window[n],r="attachEvent"===n?"onmessage":"message",o(r,function(t){var n,o;return o=t.message?"message":"data",n=t[o],"onRequestClose"===n?a(e):void 0},!1),!0},r=function(e){var a;return a=e.settings,t("."+a.modalContainerClass).length||t("body").append('<div class="'+a.modalContainerClass+'" style="display: none"><div class="'+a.modalClass+'"><div class="'+a.modalContentClass+'"></div></div></div>'),t.immoral(e,{modalContainer:t("."+a.modalContainerClass)})},i=function(a){var n,o,r,i,l;return l=a.settings,n=t(l.modalContainer),o=n.find("."+l.modalContentClass),i=t(a).attr("href"),l.content?r=l.content:/https*:\/\//.test(i)?r='<iframe src="'+i+'" seamless></iframe>':/#+/.test(i)&&(r=t(i).html()),o.html(r),o.prepend(l.modalCloseButton),e(a)},l=function(e){var a,n;return n=e.settings,a=t(n.modalContainer),i(e),a.fadeIn()},a=function(e){var a,o;return o=e.settings,a=t(o.modalContainer),a.fadeOut(),n(e)},n=function(t){var e,a;return a=t.settings,e=a.modalContainer,e.find("."+a.modalContentClass).empty()},e=function(t){var e,a;return a=t.settings,e=a.modalContainer,e.css(a.modalContainerStyle),e.find("."+a.modalContentClass).css(a.modalContentStyle),e.find("."+a.modalClass).css(a.modalStyle)},t.fn.open=function(){return l(this)},t.fn.close=function(){return a(this)},t.immoral=function(e,a){return e.settings=t.extend(!0,{},e.settings,a),"immoralized"}}(jQuery)}).call(this);
